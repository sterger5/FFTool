<Window x:Class="FFTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="FFTool - 格式转换工具"
        ResizeMode="CanResize"
        MinWidth="800"
        MinHeight="600"
        Background="#ffffff"
        FontFamily="Segoe UI"
        FontSize="14"
        AllowDrop="True"
        DragOver="Window_DragOver"
        Drop="Window_Drop"
        WindowStartupLocation="CenterScreen">

	<Window.Resources>
		<!-- 现代化按钮样式 -->
		<Style x:Key="ModernButton" TargetType="Button">
			<Setter Property="Background" Value="#f8f9fa"/>
			<Setter Property="Foreground" Value="#212529"/>
			<Setter Property="BorderBrush" Value="#dee2e6"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="12,8"/>
			<Setter Property="Margin" Value="0,0,0,8"/>
			<Setter Property="FontWeight" Value="Normal"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border x:Name="border" CornerRadius="4" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="border" Property="Background" Value="#e9ecef"/>
								<Setter TargetName="border" Property="BorderBrush" Value="#007bff"/>
							</Trigger>
							<Trigger Property="IsPressed" Value="True">
								<Setter TargetName="border" Property="Background" Value="#007bff"/>
								<Setter Property="Foreground" Value="#ffffff"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- 主要操作按钮样式 -->
		<Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
			<Setter Property="Background" Value="#007bff"/>
			<Setter Property="Foreground" Value="#ffffff"/>
			<Setter Property="BorderBrush" Value="#007bff"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border x:Name="border" CornerRadius="4" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="border" Property="Background" Value="#0056b3"/>
								<Setter TargetName="border" Property="BorderBrush" Value="#0056b3"/>
							</Trigger>
							<Trigger Property="IsPressed" Value="True">
								<Setter TargetName="border" Property="Background" Value="#004085"/>
								<Setter TargetName="border" Property="BorderBrush" Value="#004085"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- 现代化TextBox样式 -->
		<Style x:Key="ModernTextBox" TargetType="TextBox">
			<Setter Property="Background" Value="#ffffff"/>
			<Setter Property="Foreground" Value="#212529"/>
			<Setter Property="BorderBrush" Value="#ced4da"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="8,6"/>
			<Setter Property="Margin" Value="0,0,0,8"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="TextBox">
						<Border x:Name="border" CornerRadius="4" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
							<ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="border" Property="BorderBrush" Value="#007bff"/>
							</Trigger>
							<Trigger Property="IsFocused" Value="True">
								<Setter TargetName="border" Property="BorderBrush" Value="#007bff"/>
								<Setter TargetName="border" Property="BorderThickness" Value="2"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- 现代化ComboBox样式 -->
		<Style x:Key="ModernComboBox" TargetType="ComboBox">
    <Setter Property="Background" Value="#ffffff"/>
    <Setter Property="Foreground" Value="#212529"/>
    <Setter Property="BorderBrush" Value="#ced4da"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Padding" Value="8,6"/>
    <Setter Property="Margin" Value="0,0,0,8"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>
                    <ToggleButton x:Name="ToggleButton"
                                 BorderBrush="{TemplateBinding BorderBrush}"
                                 BorderThickness="{TemplateBinding BorderThickness}"
                                 Background="{TemplateBinding Background}"
                                 IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                        <ToggleButton.Template>
                            <ControlTemplate TargetType="ToggleButton">
                                <Border x:Name="border" CornerRadius="4" 
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                        BorderThickness="{TemplateBinding BorderThickness}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="20"/>
                                        </Grid.ColumnDefinitions>
                                        <ContentPresenter Grid.Column="0" 
                                                        Margin="8,6"
                                                        Content="{Binding SelectedItem.Content, RelativeSource={RelativeSource AncestorType=ComboBox}}"
                                                        VerticalAlignment="Center"/>
                                        <Path Grid.Column="1" 
                                              Data="M 0 0 L 4 4 L 8 0 Z" 
                                              Fill="#6c757d"
                                              HorizontalAlignment="Center" 
                                              VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="#007bff"/>
                                    </Trigger>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="#007bff"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                    <Popup x:Name="PART_Popup"
                           AllowsTransparency="True"
                           IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}"
                           Placement="Bottom"
                           PopupAnimation="Slide">
                        <Border x:Name="DropDownBorder"
                                Background="#ffffff"
                                BorderBrush="#ced4da"
                                BorderThickness="1"
                                CornerRadius="4"
                                MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                MinWidth="{Binding ActualWidth, ElementName=ToggleButton}">
                            <ScrollViewer SnapsToDevicePixels="True">
                                <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained"/>
                            </ScrollViewer>
                        </Border>
                    </Popup>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

		<!-- 现代化滑块样式 -->
		<Style x:Key="ModernSlider" TargetType="Slider">
			<Setter Property="Background" Value="#e9ecef"/>
			<Setter Property="Foreground" Value="#007bff"/>
			<Setter Property="Height" Value="6"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Slider">
						<Grid>
							<Border x:Name="TrackBackground" Background="{TemplateBinding Background}" CornerRadius="3" Height="6"/>
							<Track x:Name="PART_Track">
								<Track.DecreaseRepeatButton>
									<RepeatButton Command="Slider.DecreaseLarge" Style="{x:Null}">
										<RepeatButton.Template>
											<ControlTemplate>
												<Border Background="{TemplateBinding Foreground}" CornerRadius="3" Height="6"/>
											</ControlTemplate>
										</RepeatButton.Template>
									</RepeatButton>
								</Track.DecreaseRepeatButton>
								<Track.Thumb>
									<Thumb>
										<Thumb.Template>
											<ControlTemplate>
												<Ellipse Fill="#007bff" Width="16" Height="16" Stroke="#ffffff" StrokeThickness="2"/>
											</ControlTemplate>
										</Thumb.Template>
									</Thumb>
								</Track.Thumb>
								<Track.IncreaseRepeatButton>
									<RepeatButton Command="Slider.IncreaseLarge" Style="{x:Null}">
										<RepeatButton.Template>
											<ControlTemplate>
												<Border Background="Transparent"/>
											</ControlTemplate>
										</RepeatButton.Template>
									</RepeatButton>
								</Track.IncreaseRepeatButton>
							</Track>
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- 现代化复选框样式 -->
		<Style x:Key="ModernCheckBox" TargetType="CheckBox">
			<Setter Property="Foreground" Value="#212529"/>
			<Setter Property="Background" Value="#ffffff"/>
			<Setter Property="BorderBrush" Value="#ced4da"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="8,0,0,0"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="CheckBox">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="20"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							<Border x:Name="checkBorder" Grid.Column="0" CornerRadius="3" Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
                                    Width="16" Height="16">
								<Path x:Name="checkMark" Data="M 3 6 L 6 9 L 13 2" Stroke="#ffffff" StrokeThickness="2"
                                      Visibility="Collapsed"/>
							</Border>
							<ContentPresenter Grid.Column="1" Margin="{TemplateBinding Padding}" VerticalAlignment="Center"/>
						</Grid>
						<ControlTemplate.Triggers>
							<Trigger Property="IsChecked" Value="True">
								<Setter TargetName="checkBorder" Property="Background" Value="#007bff"/>
								<Setter TargetName="checkBorder" Property="BorderBrush" Value="#007bff"/>
								<Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
							</Trigger>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="checkBorder" Property="BorderBrush" Value="#007bff"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- 侧边栏列表项样式 -->
		<Style x:Key="SidebarListItem" TargetType="ListBoxItem">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="Margin" Value="0,0,0,2"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ListBoxItem">
						<Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="4" Margin="4,0">
							<ContentPresenter Margin="12,12"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsSelected" Value="True">
								<Setter TargetName="border" Property="Background" Value="#007bff"/>
							</Trigger>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="border" Property="Background" Value="#e9ecef"/>
							</Trigger>
							<MultiTrigger>
<MultiTrigger.Conditions>
<Condition Property="IsSelected" Value="True"/>
<Condition Property="IsMouseOver" Value="True"/>
</MultiTrigger.Conditions>
<Setter TargetName="border" Property="Background" Value="#0056b3"/>
</MultiTrigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- 现代化进度条样式 -->
		<Style x:Key="ModernProgressBar" TargetType="ProgressBar">
			<Setter Property="Background" Value="#e9ecef"/>
			<Setter Property="Foreground" Value="#28a745"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Height" Value="8"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ProgressBar">
						<Border CornerRadius="4" Background="{TemplateBinding Background}">
							<Border x:Name="PART_Track" CornerRadius="4">
								<Border x:Name="PART_Indicator" CornerRadius="4" Background="{TemplateBinding Foreground}"
                                        HorizontalAlignment="Left"/>
							</Border>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="240"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<!-- 左侧导航栏 -->
		<Border Grid.Column="0" Background="#f8f9fa" BorderBrush="#dee2e6" BorderThickness="0,0,1,0">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="60"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<!-- 标题区域 -->
				<Border Grid.Row="0" Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="0,0,0,1">
					<Grid>
						<TextBlock Text="FFTool" FontSize="18" FontWeight="SemiBold" Foreground="#212529"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
					</Grid>
				</Border>

				<!-- 媒体类型选择 -->
				<StackPanel Grid.Row="1" Margin="8,16,8,8">
					<TextBlock Text="媒体类型" FontSize="12" FontWeight="Medium" Foreground="#6c757d"
                               Margin="8,0,0,8"/>
					<ListBox x:Name="MediaTypeListBox"
                             SelectionChanged="MediaTypeListBox_SelectionChanged"
                             Background="Transparent"
                             BorderThickness="0"
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                             ItemContainerStyle="{StaticResource SidebarListItem}">
						<ListBox.ItemTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<TextBlock Text="🎬" FontSize="16" Margin="0,0,8,0" x:Name="Icon"/>
									<TextBlock Text="{Binding Name}" FontSize="14" Foreground="#212529" VerticalAlignment="Center" x:Name="NameText"/>
								</StackPanel>
								<DataTemplate.Triggers>
									<DataTrigger Binding="{Binding Name}" Value="音频">
										<Setter TargetName="Icon" Property="Text" Value="🎵"/>
									</DataTrigger>
									<DataTrigger Binding="{Binding Name}" Value="图片">
										<Setter TargetName="Icon" Property="Text" Value="🖼️"/>
									</DataTrigger>
									<DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem}, Path=IsSelected}" Value="True">
										<Setter TargetName="NameText" Property="Foreground" Value="#ffffff"/>
									</DataTrigger>
								</DataTemplate.Triggers>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</StackPanel>
			</Grid>
		</Border>

		<!-- 右侧主要内容区域 -->
		<Grid Grid.Column="1" Background="#ffffff">
			<Grid.RowDefinitions>
				<RowDefinition Height="60"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>

			</Grid.ColumnDefinitions>

			<!-- 标题栏 -->
			<Border Grid.Row="0" Background="#f8f9fa" BorderBrush="#dee2e6" BorderThickness="0,0,0,1">
				<Grid>
					<TextBlock Text="格式转换工具" FontSize="16" FontWeight="Medium" Foreground="#212529"
                               HorizontalAlignment="Left" VerticalAlignment="Center" Margin="24,0"/>
				</Grid>
			</Border>

			<!-- 主要操作区域 -->
			<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
				<StackPanel Margin="32,24,32,32" MaxWidth="1200" HorizontalAlignment="Left">

					<!-- 文件选择区域 -->
					<Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="24" Margin="0,0,0,16">
						<StackPanel>
							<TextBlock Text="📁 选择文件" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="Auto"/>
								</Grid.ColumnDefinitions>

								<TextBox x:Name="FilePathBox" Grid.Column="0"
                                         Style="{StaticResource ModernTextBox}"
                                         IsReadOnly="True"
                                         Margin="0,0,12,0"
                                         Text="拖拽文件到此处或点击选择文件"/>

								<Button Grid.Column="1" Content="浏览文件"
                                        Style="{StaticResource ModernButton}"
                                        Click="Browse_Click"
                                        Margin="0,0,0,8"
                                        Width="100"/>
							</Grid>
						</StackPanel>
					</Border>

					<!-- 输出设置区域 -->
					<Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="24" Margin="0,0,0,16">
						<StackPanel>
							<TextBlock Text="⚙️ 输出设置" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto"/>
									<RowDefinition Height="Auto"/>
								</Grid.RowDefinitions>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="Auto"/>
								</Grid.ColumnDefinitions>

								<TextBox x:Name="OutputPathBox" Grid.Row="0" Grid.Column="0"
                                         Style="{StaticResource ModernTextBox}"
                                         IsReadOnly="True"
                                         Margin="0,0,12,0"
                                         Text="默认保存到源文件目录"/>

								<Button Grid.Row="0" Grid.Column="1" Content="输出目录"
                                        Style="{StaticResource ModernButton}"
                                        Click="BrowseOutputFolder_Click"
                                        Margin="0,0,0,8"
                                        Width="100"/>

								<StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="0,8,0,0">
									<TextBlock Text="目标格式：" VerticalAlignment="Center" Foreground="#6c757d" Margin="0,0,12,0"/>
									<ComboBox x:Name="FormatBox" Style="{StaticResource ModernComboBox}" Width="120" Margin="0,0,0,8"/>
								</StackPanel>
							</Grid>
						</StackPanel>
					</Border>

					<!-- 操作按钮区域 -->
					<Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="24" Margin="0,0,0,16">
						<StackPanel>
							<TextBlock Text="🚀 操作" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

							<StackPanel Orientation="Horizontal">
								<Button Content="开始转换"
                                        Style="{StaticResource PrimaryButton}"
                                        Click="Convert_Click"
                                        Width="120"
                                        Margin="0,0,12,8"/>

								<Button Content="中止转换"
                                        Style="{StaticResource ModernButton}"
                                        Click="Cancel_Click"
                                        Width="120"
                                        Margin="0,0,0,8"/>
							</StackPanel>
							<!-- 分离音视频复选框 -->
							<CheckBox x:Name="SplitVideoAudioCheckBox"
									  Style="{StaticResource ModernCheckBox}"
									  Content="分离音视频"
									  Margin="0,8,0,0"/>
						</StackPanel>
					</Border>

					<!-- 状态信息区域 -->
					<Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="24">
						<StackPanel>
							<TextBlock Text="📊 状态" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

							<TextBlock x:Name="StatusText" Text="准备就绪" Foreground="#17a2b8" FontSize="14" Margin="0,0,0,12"/>

							<ProgressBar x:Name="ProgressBar" Style="{StaticResource ModernProgressBar}"
                                         Minimum="0" Maximum="100" Value="0"/>
						</StackPanel>
					</Border>

					<!-- 视频参数和字幕设置并排显示 -->
					<Grid x:Name="VideoAndSubtitlePanel" Visibility="Collapsed" Margin="0,0,0,16">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="2*"/>
							<ColumnDefinition Width="1.5*"/>
						</Grid.ColumnDefinitions>

						<!-- 视频参数设置区域 -->
						<Border x:Name="VideoParametersPanel" Grid.Column="0" Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="24" Margin="0,0,16,0">
							<StackPanel>
								<TextBlock Text="🎥 视频参数设置" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

								<!-- 码率设置 -->
								<Grid Margin="0,0,0,20">
									<Grid.RowDefinitions>
										<RowDefinition Height="Auto"/>
										<RowDefinition Height="Auto"/>
										<RowDefinition Height="Auto"/>
									</Grid.RowDefinitions>

									<TextBlock Grid.Row="0" Text="码率 (Kbps)" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>

									<Grid Grid.Row="1">
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="*"/>
											<ColumnDefinition Width="100"/>
										</Grid.ColumnDefinitions>

										<Slider x:Name="BitrateSlider" Grid.Column="0"
									        Style="{StaticResource ModernSlider}"
									        Minimum="100" Maximum="187500" Value="2000"
									        TickFrequency="100"
									        ValueChanged="BitrateSlider_ValueChanged"
									        Margin="0,0,12,0"/>

										<TextBox x:Name="BitrateTextBox" Grid.Column="1"
									         Style="{StaticResource ModernTextBox}"
									         Text="2000"
									         TextChanged="BitrateTextBox_TextChanged"
									         Margin="0,0,0,8"/>
									</Grid>

									<TextBlock Grid.Row="2" Text="建议：720p使用2000-5000，1080p使用5000-15000" FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
								</Grid>

								<!-- 帧率设置 -->
								<Grid Margin="0,0,0,20">
									<Grid.RowDefinitions>
										<RowDefinition Height="Auto"/>
										<RowDefinition Height="Auto"/>
										<RowDefinition Height="Auto"/>
									</Grid.RowDefinitions>

									<TextBlock Grid.Row="0" Text="帧率 (FPS)" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>

									<Grid Grid.Row="1">
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="*"/>
											<ColumnDefinition Width="100"/>
										</Grid.ColumnDefinitions>

										<Slider x:Name="FramerateSlider" Grid.Column="0"
									        Style="{StaticResource ModernSlider}"
									        Minimum="1" Maximum="120" Value="30"
									        TickFrequency="1"
									        ValueChanged="FramerateSlider_ValueChanged"
									        Margin="0,0,12,0"/>

										<TextBox x:Name="FramerateTextBox" Grid.Column="1"
									         Style="{StaticResource ModernTextBox}"
									         Text="30"
									         TextChanged="FramerateTextBox_TextChanged"
									         Margin="0,0,0,8"/>
									</Grid>

									<TextBlock Grid.Row="2" Text="常用：24fps电影，30fps普通视频，60fps游戏录制" FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
								</Grid>

								<!-- 硬件加速选项 -->
								<TextBlock Text="硬件加速" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
								<CheckBox x:Name="NvidiaAccelerationCheckBox"
									  Style="{StaticResource ModernCheckBox}"
									  Content="启用英伟达硬件加速 (需要支持的显卡)"
									  Margin="0,0,0,16"/>
							
								<!-- 视频翻转选项 -->
								<TextBlock Text="视频翻转" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
								<Grid Margin="0,0,0,16">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="*"/>
										<ColumnDefinition Width="*"/>
									</Grid.ColumnDefinitions>

									<CheckBox x:Name="HorizontalFlipCheckBox" Grid.Column="0"
								          Style="{StaticResource ModernCheckBox}"
								          Content="水平翻转（左右颠倒）"
								          Margin="0,0,16,0"/>

									<CheckBox x:Name="VerticalFlipCheckBox" Grid.Column="1"
								          Style="{StaticResource ModernCheckBox}"
								          Content="垂直翻转（上下颠倒）"/>
								</Grid>

								<!-- 音量调节选项 -->
								<TextBlock Text="音量调节" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
								<Grid Margin="0,0,0,20">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="100"/>
        </Grid.ColumnDefinitions>

        <Slider x:Name="VolumeSlider" Grid.Column="0"
                Style="{StaticResource ModernSlider}"
                Minimum="0" Maximum="200" Value="100"
                TickFrequency="1"
                ValueChanged="VolumeSlider_ValueChanged"
                Margin="0,0,12,0"/>

        <TextBox x:Name="VolumeTextBox" Grid.Column="1"
                 Style="{StaticResource ModernTextBox}"
                 Text="100"
                 TextChanged="VolumeTextBox_TextChanged"
                 Margin="0,0,0,8"/>
    </Grid>

    <TextBlock Grid.Row="2" Text="默认100%，范围0-200%" FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
</Grid>
							</StackPanel>
						</Border>

						<!-- 字幕设置区域 -->
						<Border x:Name="SubtitlePanel" Grid.Column="1" Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="24">
							<StackPanel>
								<TextBlock Text="🎬 字幕设置" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

								<!-- 字幕文件选择 -->
								<Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="16" Margin="0,0,0,16">
									<StackPanel>
										<TextBlock Text="字幕文件" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>

										<TextBox x:Name="SubtitlePathBox"
												 Style="{StaticResource ModernTextBox}"
												 IsReadOnly="True"
												 Text="选择字幕文件（可选）"
												 Margin="0,0,0,8"/>

										<StackPanel Orientation="Horizontal">
											<Button Content="选择字幕"
													Style="{StaticResource ModernButton}"
													Click="BrowseSubtitle_Click"
													Width="80"
													Margin="0,0,8,0"/>

											<Button Content="清除"
													Style="{StaticResource ModernButton}"
													Click="ClearSubtitle_Click"
													Width="60"/>
										</StackPanel>

										<TextBlock Text="支持格式：SRT、ASS、SSA、VTT，字幕将烧录到视频中"
												   FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
									</StackPanel>
								</Border>

								<!-- 字幕样式设置 -->
								<Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="8" Padding="16">
									<StackPanel>
										<TextBlock Text="字幕样式" FontSize="14" Foreground="#6c757d" Margin="0,0,0,12"/>

										<Grid Margin="0,0,0,12">
											<Grid.ColumnDefinitions>
												<ColumnDefinition Width="*"/>
												<ColumnDefinition Width="*"/>
											</Grid.ColumnDefinitions>

											<StackPanel Grid.Column="0" Margin="0,0,8,0">
												<TextBlock Text="字体大小" FontSize="14" Foreground="#6c757d" Margin="0,0,0,4"/>
												<ComboBox x:Name="SubtitleFontSizeComboBox" Style="{StaticResource ModernComboBox}">
													<ComboBoxItem Content="16" IsSelected="True"/>
													<ComboBoxItem Content="18"/>
													<ComboBoxItem Content="20"/>
													<ComboBoxItem Content="24"/>
													<ComboBoxItem Content="28"/>
													<ComboBoxItem Content="32"/>
												</ComboBox>
											</StackPanel>

											<StackPanel Grid.Column="1" Margin="8,0,0,0">
												<TextBlock Text="字体颜色" FontSize="14" Foreground="#6c757d" Margin="0,0,0,4"/>
												<ComboBox x:Name="SubtitleColorComboBox" Style="{StaticResource ModernComboBox}">
													<ComboBoxItem Content="白色" IsSelected="True"/>
													<ComboBoxItem Content="黄色"/>
													<ComboBoxItem Content="红色"/>
													<ComboBoxItem Content="绿色"/>
													<ComboBoxItem Content="蓝色"/>
													<ComboBoxItem Content="黑色"/>
												</ComboBox>
											</StackPanel>
										</Grid>
									</StackPanel>
								</Border>
							</StackPanel>
						</Border>
					</Grid>
					<!-- 音频参数设置区域 - 修改布局以支持换行 -->
					<Border x:Name="AudioParametersPanel" Grid.Row="1" Grid.Column="1" Background="#ffffff" BorderBrush="#dee2e6" 
        BorderThickness="1" CornerRadius="8" Padding="24" Margin="0,0,0,16" Visibility="Collapsed">
    <StackPanel MaxWidth="800">
        <TextBlock Text="🎵 音频参数设置" FontSize="16" FontWeight="Medium" Foreground="#212529" Margin="0,0,0,16"/>

        <WrapPanel Orientation="Horizontal">
            <!-- 音量调节 -->
            <Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="4" 
                    Padding="16" Margin="0,0,16,16" MinWidth="300">
                <StackPanel>
                    <TextBlock Text="音量调节" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <Slider x:Name="AudioVolumeSlider" Grid.Column="0"
                                Style="{StaticResource ModernSlider}"
                                Minimum="0" Maximum="200" Value="100"
                                TickFrequency="1"
                                ValueChanged="AudioVolumeSlider_ValueChanged"
                                Margin="0,0,12,0"/>

                        <TextBox x:Name="AudioVolumeTextBox" Grid.Column="1"
                                Style="{StaticResource ModernTextBox}"
                                Text="100"
                                TextChanged="AudioVolumeTextBox_TextChanged"/>
                    </Grid>
                    <TextBlock Text="默认100%，范围0-200%" FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>

            <!-- 音频比特率设置 -->
            <Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="4" 
                    Padding="16" Margin="0,0,16,16" MinWidth="300">
                <StackPanel>
                    <TextBlock Text="音频比特率" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <Slider x:Name="AudioBitrateSlider" Grid.Column="0"
                                Style="{StaticResource ModernSlider}"
                                Minimum="64" Maximum="8192" Value="128"
                                TickFrequency="8"
                                ValueChanged="AudioBitrateSlider_ValueChanged"
                                Margin="0,0,12,0"/>

                        <TextBox x:Name="AudioBitrateTextBox" Grid.Column="1"
                                Style="{StaticResource ModernTextBox}"
                                Text="128"
                                TextChanged="AudioBitrateTextBox_TextChanged"/>
                    </Grid>
                    <TextBlock Text="常用：128kbps普通质量，192kbps高质量" FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>

            <!-- 采样率设置 -->
            <Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="4" 
                    Padding="16" Margin="0,0,16,16" MinWidth="300">
                <StackPanel>
                    <TextBlock Text="采样率" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
                    <ComboBox x:Name="AudioSampleRateComboBox" 
                            Style="{StaticResource ModernComboBox}" 
                            MinWidth="200" 
                            HorizontalAlignment="Left">
                        <ComboBoxItem Content="22050" />
                        <ComboBoxItem Content="44100" IsSelected="True"/>
                        <ComboBoxItem Content="48000" />
                        <ComboBoxItem Content="96000" />
                        <ComboBoxItem Content="192000" />
                        <ComboBoxItem Content="384000" />
                    </ComboBox>
                    <TextBlock Text="常用：44100Hz CD质量，48000Hz专业音频" 
                             FontSize="12" Foreground="#6c757d" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>

            <!-- 音频选项 -->
            <Border Background="#ffffff" BorderBrush="#dee2e6" BorderThickness="1" CornerRadius="4" 
                    Padding="16" Margin="0,0,16,16" MinWidth="300">
                <StackPanel>
                    <TextBlock Text="音频选项" FontSize="14" Foreground="#6c757d" Margin="0,0,0,8"/>
                    <CheckBox x:Name="MonoAudioCheckBox"
                            Style="{StaticResource ModernCheckBox}"
                            Content="转换为单声道"
                            Margin="0,0,0,8"/>
                    <CheckBox x:Name="NormalizeAudioCheckBox"
                            Style="{StaticResource ModernCheckBox}"
                            Content="音频标准化（自动调整音量到最佳电平）"
                            Margin="0,0,0,4"/>
                </StackPanel>
            </Border>
        </WrapPanel>
    </StackPanel>
</Border>
				</StackPanel>
			</ScrollViewer>
		</Grid>
	</Grid>
</Window>